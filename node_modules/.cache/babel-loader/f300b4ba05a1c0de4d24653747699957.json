{"ast":null,"code":"var _jsxFileName = \"D:\\\\eduexcellence-dev\\\\src\\\\containers\\\\admin\\\\course\\\\new\\\\index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { connect } from 'react-redux';\nimport BasicDetails from \"./components/basicDetails\";\nimport Curriculum from \"./components/curriculum\";\nimport Dates from \"./components/dates\";\nimport Media from \"./components/media\";\nimport Price from \"./components/price\";\nimport Seo from \"./components/seo\";\nimport \"../../../../css/adminpages.css\";\nimport { createCourse, updateCourse, saveCourse, saveThumb, getCourse } from \"../actions\";\n\nconst NewCourse = props => {\n  const [current, setTab] = useState('basic');\n  const [courseData, setCourse] = useState(null);\n  const [thumbFile, setThumbFile] = useState(null);\n  const [teaser, setTeaser] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n  const tabs = [{\n    key: 'basic',\n    value: 'Basic Detail',\n    prev: null,\n    next: 'curriculum'\n  }, {\n    key: 'curriculum',\n    value: 'Curriculum',\n    prev: 'basic',\n    next: 'dates'\n  }, {\n    key: 'dates',\n    value: 'Important Dates',\n    prev: 'curriculum',\n    next: 'media'\n  }, {\n    key: 'media',\n    value: 'Media',\n    prev: 'dates',\n    next: 'price'\n  }, {\n    key: 'price',\n    value: 'Price',\n    prev: 'media',\n    next: 'seo'\n  }, {\n    key: 'seo',\n    value: 'Seo',\n    prev: 'price',\n    next: null\n  }];\n  useEffect(() => {\n    let params = props.match.params;\n\n    if (params && params.id !== \"new\") {\n      setLoading(true);\n      props.getCourse(params.id).then(res => {\n        setCourse(res.result.data);\n        setLoading(false);\n      }).catch(err => {\n        alert(\"Invalid Course\");\n        history.push(\"/admin/course\");\n      });\n    }\n  }, []);\n\n  const handleBack = () => {\n    history.push(\"/admin/course\");\n  };\n\n  const handleSave = obj => {\n    const {\n      course\n    } = props;\n    let next = tabs.filter(i => i.key === current);\n\n    if (course) {\n      props.updateCourse(obj, course._id).then(res => {\n        if (next && next[0] && next[0].next) {\n          setTab(next[0].next);\n        } else {\n          handleBack();\n        }\n      }).catch(err => {\n        console.log(\"err === \", err);\n      });\n    } else {\n      if (teaser) obj['teaser'] = teaser;\n      props.createCourse(obj).then(res => {\n        setTeaser(null);\n\n        if (thumbFile) {\n          saveThumbFile(res.result.data, thumbFile);\n        }\n\n        if (next && next[0] && next[0].next) {\n          setTab(next[0].next);\n        } else {\n          handleBack();\n        }\n      }).catch(err => {\n        console.log(\"err === \", err);\n      });\n    }\n  };\n\n  const saveThumbFile = (obj, file) => {\n    props.saveThumb(file, obj).then(res => {\n      setThumbFile(null);\n    }).catch(err => {\n      console.log(\"err === \", err);\n      setThumbFile(null);\n      alert(\"Please Try Again\");\n    });\n  };\n\n  const handleThumbFile = file => {\n    const {\n      course\n    } = props;\n\n    if (course) {\n      saveThumbFile(course, file);\n    } else {\n      setThumbFile(file);\n    }\n  };\n\n  const handleTeaser = url => {\n    const {\n      course\n    } = props;\n\n    if (course) {\n      handleSave({\n        teaser: url\n      });\n    } else {\n      setTeaser(url);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dash-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"courses-strip\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flexible\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"course-side\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-youtube-play\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  }), \" Add new courses\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addnew\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleBack,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-plus\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 50\n    }\n  }), \" Back to courses list\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"course-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"tab-nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"bottom-border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }), tabs.map(item => /*#__PURE__*/React.createElement(\"li\", {\n    key: item.key,\n    className: current === item.key ? \"tab-nav__item active\" : \"tab-nav__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 35\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    onClick: () => setTab(item.key),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 130\n    }\n  }, item.value)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-sec\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, current === \"basic\" && /*#__PURE__*/React.createElement(BasicDetails, {\n    saveCallback: handleSave,\n    course: props.course ? props.course : courseData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 41\n    }\n  }), current === \"curriculum\" && /*#__PURE__*/React.createElement(Curriculum, {\n    setTab: value => setTab(value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 46\n    }\n  }), current === \"dates\" && /*#__PURE__*/React.createElement(Dates, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 41\n    }\n  }), current === \"media\" && /*#__PURE__*/React.createElement(Media, {\n    thumbFileUpload: handleThumbFile,\n    teaserUpload: handleTeaser,\n    course: props.course,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 41\n    }\n  }), current === \"price\" && /*#__PURE__*/React.createElement(Price, {\n    saveCallback: handleSave,\n    course: props.course,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 41\n    }\n  }), current === \"seo\" && /*#__PURE__*/React.createElement(Seo, {\n    saveCallback: handleSave,\n    course: props.course,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 39\n    }\n  }))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    course: state.admincourse.courseData\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    createCourse: obj => dispatch(createCourse(obj)),\n    updateCourse: (obj, id) => dispatch(updateCourse(obj, id)),\n    saveThumb: (file, obj) => dispatch(saveThumb(file, obj)),\n    getCourse: id => dispatch(getCourse(id))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewCourse);","map":{"version":3,"sources":["D:/eduexcellence-dev/src/containers/admin/course/new/index.js"],"names":["React","useState","useEffect","useHistory","connect","BasicDetails","Curriculum","Dates","Media","Price","Seo","createCourse","updateCourse","saveCourse","saveThumb","getCourse","NewCourse","props","current","setTab","courseData","setCourse","thumbFile","setThumbFile","teaser","setTeaser","loading","setLoading","history","tabs","key","value","prev","next","params","match","id","then","res","result","data","catch","err","alert","push","handleBack","handleSave","obj","course","filter","i","_id","console","log","saveThumbFile","file","handleThumbFile","handleTeaser","url","map","item","mapStateToProps","state","admincourse","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { connect } from 'react-redux'\r\nimport BasicDetails from \"./components/basicDetails\";\r\nimport Curriculum from \"./components/curriculum\";\r\nimport Dates from \"./components/dates\";\r\nimport Media from \"./components/media\";\r\nimport Price from \"./components/price\";\r\nimport Seo from \"./components/seo\";\r\nimport \"../../../../css/adminpages.css\"\r\n\r\nimport { createCourse, updateCourse, saveCourse, saveThumb, getCourse } from \"../actions\";\r\n\r\nconst NewCourse = (props) => {\r\n    const [current, setTab] = useState('basic');\r\n    const [courseData, setCourse] = useState(null);\r\n    const [thumbFile, setThumbFile] = useState(null);\r\n    const [teaser, setTeaser] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const history = useHistory();\r\n    const tabs = [\r\n        { key: 'basic', value: 'Basic Detail', prev: null, next: 'curriculum' },\r\n        { key: 'curriculum', value: 'Curriculum', prev: 'basic', next: 'dates' },\r\n        { key: 'dates', value: 'Important Dates', prev: 'curriculum', next: 'media' },\r\n        { key: 'media', value: 'Media', prev: 'dates', next: 'price' },\r\n        { key: 'price', value: 'Price', prev: 'media', next: 'seo' },\r\n        { key: 'seo', value: 'Seo', prev: 'price', next: null }\r\n    ];\r\n\r\n    useEffect(() => {\r\n        let params = props.match.params;\r\n        if (params && params.id !== \"new\") {\r\n            setLoading(true);\r\n            props.getCourse(params.id).then(res => {\r\n                setCourse(res.result.data);\r\n                setLoading(false);\r\n            }).catch(err => {\r\n                alert(\"Invalid Course\");\r\n                history.push(\"/admin/course\");\r\n            });\r\n        }\r\n    }, []);\r\n\r\n    const handleBack = () => {\r\n        history.push(\"/admin/course\");\r\n    }\r\n\r\n    const handleSave = (obj) => {\r\n        const { course } = props;\r\n        let next = tabs.filter(i => i.key === current);\r\n        if (course) {\r\n            props.updateCourse(obj, course._id).then(res => {\r\n                if (next && next[0] && next[0].next) {\r\n                    setTab(next[0].next);\r\n                } else {\r\n                    handleBack();\r\n                }\r\n            }).catch(err => {\r\n                console.log(\"err === \", err);\r\n            })\r\n        } else {\r\n            if (teaser) obj['teaser'] = teaser;\r\n            props.createCourse(obj).then(res => {\r\n                setTeaser(null);\r\n                if (thumbFile) {\r\n                    saveThumbFile(res.result.data, thumbFile);\r\n                }\r\n                if (next && next[0] && next[0].next) {\r\n                    setTab(next[0].next);\r\n                } else {\r\n                    handleBack();\r\n                }\r\n            }).catch(err => {\r\n                console.log(\"err === \", err);\r\n            })\r\n        }\r\n    }\r\n\r\n    const saveThumbFile = (obj, file) => {\r\n        props.saveThumb(file, obj).then(res => {\r\n            setThumbFile(null);\r\n        }).catch(err => {\r\n            console.log(\"err === \", err);\r\n            setThumbFile(null);\r\n            alert(\"Please Try Again\")\r\n        })\r\n    }\r\n\r\n    const handleThumbFile = (file) => {\r\n        const { course } = props;\r\n        if (course) {\r\n            saveThumbFile(course, file);\r\n        } else {\r\n            setThumbFile(file);\r\n        }\r\n    }\r\n\r\n    const handleTeaser = (url) => {\r\n        const { course } = props;\r\n        if (course) {\r\n            handleSave({ teaser: url });\r\n        } else {\r\n            setTeaser(url);\r\n        }\r\n    }\r\n\r\n    return <div className=\"dash-data\">\r\n        <div className=\"courses-strip\">\r\n            <div className=\"flexible\">\r\n                <div className=\"course-side\">\r\n                    <i className=\"fa fa-youtube-play\"></i> Add new courses\r\n          </div>\r\n                <div className=\"addnew\">\r\n                    <button onClick={handleBack}><i className=\"fa fa-plus\"></i> Back to courses list</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div className=\"course-title\">\r\n\r\n            <ul className=\"tab-nav\">\r\n                <span className=\"bottom-border\"></span>\r\n                {tabs.map(item => <li key={item.key} className={current === item.key ? \"tab-nav__item active\" : \"tab-nav__item\"}><a onClick={() => setTab(item.key)}>{item.value}</a></li>)}\r\n            </ul>\r\n            <div className=\"form-sec\">\r\n\r\n                {current === \"basic\" && <BasicDetails saveCallback={handleSave} course={props.course ? props.course : courseData} />}\r\n\r\n                {current === \"curriculum\" && <Curriculum setTab={(value) => setTab(value)} />}\r\n\r\n                {current === \"dates\" && <Dates />}\r\n\r\n                {current === \"media\" && <Media thumbFileUpload={handleThumbFile} teaserUpload={handleTeaser} course={props.course} />}\r\n\r\n                {current === \"price\" && <Price saveCallback={handleSave} course={props.course} />}\r\n\r\n                {current === \"seo\" && <Seo saveCallback={handleSave} course={props.course} />}\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return { course: state.admincourse.courseData };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        createCourse: (obj) => (dispatch(createCourse(obj))),\r\n        updateCourse: (obj, id) => (dispatch(updateCourse(obj, id))),\r\n        saveThumb: (file, obj) => (dispatch(saveThumb(file, obj))),\r\n        getCourse: (id) => (dispatch(getCourse(id)))\r\n    };\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(NewCourse);"]},"metadata":{},"sourceType":"module"}